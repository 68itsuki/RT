## 第1章：Reactの概要と導入

### 1-1. Reactとは何か？

Reactは、Facebook（現Meta）が開発した「ユーザーインターフェースを作るためのJavaScriptライブラリ」です。2013年にオープンソースとして公開され、現在では世界中の開発者に広く使われています。

#### Reactの基本思想

Reactは以下の3つの基本思想に基づいて設計されています：

1. **宣言的UI（Declarative UI）**
   - 「何を表示したいか」を書くだけで、Reactが「どうやって表示するか」を自動で処理
   - 命令的（Imperative）なDOM操作から解放される

2. **コンポーネントベース**
   - UIを小さな部品（コンポーネント）に分割
   - 再利用可能で保守性の高いコードを書ける

3. **単一データフロー**
   - データは上から下に流れる
   - 予測可能でデバッグしやすい状態管理

#### Reactの特徴

```jsx
// 宣言的UIの例
function Welcome({ name }) {
  return <h1>こんにちは、{name}さん！</h1>;
}

// 従来の命令的アプローチ（jQueryなど）
// document.getElementById('welcome').innerHTML = 'こんにちは、' + name + 'さん！';
```

**主な特徴：**
- **仮想DOM**：実際のDOMを直接操作せず、仮想的なDOMで差分を計算
- **JSX**：JavaScript内でHTMLライクな構文を書ける
- **Hooks**：関数コンポーネントで状態管理やライフサイクルを扱える
- **豊富なエコシステム**：ルーティング、状態管理、UIライブラリなど

### 1-2. なぜReactを使うのか？

#### 企業がReactを採用する理由

**1. 開発効率の向上**
- コンポーネントの再利用により、開発時間を短縮
- 宣言的UIにより、コードが読みやすく保守しやすい

**2. パフォーマンスの最適化**
- 仮想DOMによる効率的な再レンダリング
- 必要な部分のみを更新

**3. 豊富なエコシステム**
- npmレジストリに多数のライブラリが存在
- コミュニティが活発で情報が豊富

**4. 学習コストの低さ**
- JavaScriptの知識があれば始めやすい
- 段階的に学習できる

#### 他のフレームワークとの比較

| フレームワーク | 特徴 | 学習コスト | エコシステム |
|----------------|------|------------|--------------|
| **React** | 柔軟性が高い、ライブラリ | 中 | 非常に豊富 |
| **Vue.js** | 学習しやすい、フレームワーク | 低 | 豊富 |
| **Angular** | 大規模向け、フルスタック | 高 | 豊富 |
| **Svelte** | 軽量、コンパイル時最適化 | 中 | 発展中 |

### 1-3. Reactの開発環境

#### Node.jsとnpmのインストール

**1. Node.jsのインストール**

Node.jsは、JavaScriptをサーバーサイドで実行できる環境です。Reactの開発には必須です。

```bash
# macOS（Homebrew使用）
brew install node

# Windows
# https://nodejs.org/ からLTS版をダウンロード

# Linux（Ubuntu）
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs
```

**2. バージョン確認**

```bash
node -v  # v18.17.0 など
npm -v   # 9.6.7 など
```

**3. パッケージマネージャーの選択**

```bash
# npm（Node.jsに標準搭載）
npm install package-name

# yarn（高速、セキュリティ重視）
npm install -g yarn
yarn add package-name

# pnpm（ディスク容量節約）
npm install -g pnpm
pnpm add package-name
```

#### 開発ツールのインストール

**1. コードエディタ**

```bash
# Visual Studio Code（推奨）
# https://code.visualstudio.com/ からダウンロード

# 推奨拡張機能
- ES7+ React/Redux/React-Native snippets
- Prettier - Code formatter
- ESLint
- Auto Rename Tag
```

**2. ブラウザ拡張機能**

```bash
# React Developer Tools
# Chrome/Firefoxの拡張機能ストアからインストール
# コンポーネントの階層構造やprops、stateを確認可能
```

### 1-4. プロジェクトの作成と実行

#### create-react-appでの環境構築

**1. プロジェクトの作成**

```bash
# 基本的な作成方法
npx create-react-app my-app

# TypeScript版で作成
npx create-react-app my-app --template typescript

# 特定のバージョンで作成
npx create-react-app@5.0.1 my-app
```

**2. プロジェクト構造の理解**

```
my-app/
├── public/                 # 静的ファイル
│   ├── index.html         # メインのHTMLファイル
│   ├── favicon.ico        # ファビコン
│   └── manifest.json      # PWA設定
├── src/                   # ソースコード
│   ├── App.js            # メインコンポーネント
│   ├── index.js          # エントリーポイント
│   ├── App.css           # スタイル
│   └── logo.svg          # 画像ファイル
├── package.json          # 依存関係とスクリプト
├── README.md             # プロジェクト説明
└── .gitignore           # Git除外設定
```

**3. 開発サーバーの起動**

```bash
cd my-app
npm start
# http://localhost:3000 でアプリが起動
```

#### Viteを使った高速開発環境

**1. Viteプロジェクトの作成**

```bash
# ViteでReactプロジェクトを作成
npm create vite@latest my-app -- --template react

# TypeScript版
npm create vite@latest my-app -- --template react-ts
```

**2. Viteの利点**

- **高速な起動**：開発サーバーの起動が非常に速い
- **HMR（Hot Module Replacement）**：ファイル変更時の更新が高速
- **ビルド時間の短縮**：本番ビルドも高速

```bash
cd my-app
npm install
npm run dev  # 開発サーバー起動
npm run build  # 本番ビルド
```

### 1-5. Reactの基本概念

#### コンポーネントとは

コンポーネントは、UIの一部分を表す再利用可能なコードの塊です。

```jsx
// 関数コンポーネントの例
function Welcome() {
  return <h1>こんにちは！</h1>;
}

// 使用例
function App() {
  return (
    <div>
      <Welcome />
      <Welcome />
      <Welcome />
    </div>
  );
}
```

#### JSXとは

JSXは、JavaScript内でHTMLライクな構文を書ける拡張記法です。

```jsx
// JSXの例
const element = (
  <div className="container">
    <h1>タイトル</h1>
    <p>これは段落です</p>
  </div>
);

// コンパイル後（実際のJavaScript）
const element = React.createElement(
  'div',
  { className: 'container' },
  React.createElement('h1', null, 'タイトル'),
  React.createElement('p', null, 'これは段落です')
);
```

#### 仮想DOMとは

仮想DOMは、実際のDOMの軽量なコピーです。

```jsx
// 仮想DOMの動作例
function Counter() {
  const [count, setCount] = useState(0);
  
  return (
    <div>
      <p>カウント: {count}</p>
      <button onClick={() => setCount(count + 1)}>
        増やす
      </button>
    </div>
  );
}

// カウントが1から2に変わった時：
// 1. 仮想DOMで差分を計算
// 2. 実際のDOMで必要な部分のみ更新
// 3. <p>タグの内容のみが更新される
```

### 1-6. 開発のベストプラクティス

#### プロジェクト構造の設計

```
src/
├── components/          # 再利用可能なコンポーネント
│   ├── common/         # 汎用的なコンポーネント
│   ├── forms/          # フォーム関連
│   └── layout/         # レイアウト関連
├── pages/              # ページコンポーネント
├── hooks/              # カスタムフック
├── utils/              # ユーティリティ関数
├── services/           # API通信
├── styles/             # スタイルファイル
└── assets/             # 画像やフォント
```

#### コーディング規約

**1. コンポーネント名**

```jsx
// ✅ 良い例：PascalCase
function UserProfile() { }
function TodoItem() { }

// ❌ 悪い例
function userProfile() { }
function todo_item() { }
```

**2. ファイル名**

```jsx
// ✅ 良い例
UserProfile.jsx
TodoItem.jsx
useAuth.js

// ❌ 悪い例
userProfile.jsx
todo_item.jsx
```

**3. インポート順序**

```jsx
// 1. React関連
import React, { useState, useEffect } from 'react';

// 2. 外部ライブラリ
import axios from 'axios';
import { useNavigate } from 'react-router-dom';

// 3. 内部コンポーネント
import Header from './components/Header';
import Footer from './components/Footer';

// 4. ユーティリティ
import { formatDate } from '../utils/date';

// 5. スタイル
import './App.css';
```

#### 開発時の注意点

**1. キーの使用**

```jsx
// ✅ 良い例：一意なキーを使用
{todos.map(todo => (
  <TodoItem key={todo.id} todo={todo} />
))}

// ❌ 悪い例：インデックスをキーに使用
{todos.map((todo, index) => (
  <TodoItem key={index} todo={todo} />
))}
```

**2. 副作用の管理**

```jsx
// ✅ 良い例：useEffectで副作用を管理
useEffect(() => {
  const fetchData = async () => {
    const response = await fetch('/api/data');
    const data = await response.json();
    setData(data);
  };
  
  fetchData();
}, []);

// ❌ 悪い例：レンダリング中に副作用を実行
function Component() {
  fetch('/api/data').then(setData); // これは避ける
  return <div>...</div>;
}
```

### 1-7. デバッグと開発者ツール

#### React Developer Tools

**1. インストール**

```bash
# Chrome拡張機能
# https://chrome.google.com/webstore/detail/react-developer-tools

# Firefox拡張機能
# https://addons.mozilla.org/en-US/firefox/addon/react-devtools/
```

**2. 使用方法**

```jsx
// コンポーネントの階層構造を確認
function App() {
  return (
    <div>
      <Header />
      <Main>
        <Sidebar />
        <Content />
      </Main>
      <Footer />
    </div>
  );
}

// React Developer Toolsで以下が確認可能：
// - コンポーネントの階層
// - propsの値
// - stateの値
// - コンポーネントの再レンダリング
```

#### コンソールログの活用

```jsx
function UserProfile({ user }) {
  console.log('UserProfile rendered with:', user);
  
  useEffect(() => {
    console.log('UserProfile mounted');
    return () => console.log('UserProfile unmounted');
  }, []);
  
  return <div>{user.name}</div>;
}
```

#### エラーバウンダリー

```jsx
class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false };
  }
  
  static getDerivedStateFromError(error) {
    return { hasError: true };
  }
  
  componentDidCatch(error, errorInfo) {
    console.error('Error caught:', error, errorInfo);
  }
  
  render() {
    if (this.state.hasError) {
      return <h1>エラーが発生しました</h1>;
    }
    
    return this.props.children;
  }
}

// 使用例
<ErrorBoundary>
  <UserProfile user={user} />
</ErrorBoundary>
```

### 1-8. 次のステップ

#### 学習の進め方

**1. 基礎固め（1-2週間）**
- JSXの基本構文
- コンポーネントの作成
- propsの受け渡し

**2. 状態管理（1-2週間）**
- useStateフック
- useEffectフック
- イベントハンドリング

**3. 実践的な開発（2-4週間）**
- フォーム処理
- API連携
- ルーティング

**4. 応用（継続的）**
- 状態管理ライブラリ
- パフォーマンス最適化
- テスト

#### 推奨リソース

**公式ドキュメント**
- [React公式チュートリアル](https://react.dev/learn)
- [React公式ドキュメント](https://react.dev/)

**学習サイト**
- [React Tutorial for Beginners](https://www.youtube.com/watch?v=bMknfKXIFA8)
- [React入門](https://ja.react.dev/learn)

**実践的なプロジェクト**
- TODOアプリ
- 天気予報アプリ
- ブログアプリ
- ショッピングカート